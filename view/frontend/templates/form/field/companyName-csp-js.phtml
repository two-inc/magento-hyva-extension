<?php
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes 2020-present. All rights reserved.
 * This product is licensed per Magento install
 * See https://hyva.io/license
 */

declare(strict_types=1);

use Hyva\Theme\Model\ViewModelRegistry;
use Hyva\Theme\ViewModel\HyvaCsp;
use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;

/** @var Template $block */
/** @var Escaper $escaper */
/** @var ViewModelRegistry $viewModels */
/** @var HyvaCsp $hyvaCsp */

/** Generated with hyva-csp-helper.php */
?>
<script>
<?php
/** Generated with hyva-csp-helper.php */
?>
function twoGatewayHyvaCompanySearchField() {
    return Object.assign(
        searchInput(),
        {
            showManual: false
        }
        ,{
            ['showManual']() {return this.showManual},
            ['!showManual']() {return !this.showManual},
            ['twoGatewayHyvaOnCompanySearchChange'](event) {return this.search = this.$el.value},
            ['twoGatewayHyvaGetItemClass']() {return {'bg-gray-100': this.selectedIndex === this.index}},
            ['twoGatewayHyvaOnSearchModeClick'](event) {return this.showManual = false},
            ['twoGatewayHyvaOnCompanyItemClick'](event) {return this.selectItem(this.item)},
            ['twoGatewayHyvaOnManualEntryClick'](event) {this.showManual = true; hyva.getBrowserStorage().setItem('shipping_company_selection', JSON.stringify({}));},
            ['twoGatewayHyvaOnCompanySearchClickOutside'](event) {return this.isOpen = false},
            ['twoGatewayHyvaOnCompanySearchFocus'](event) {return this.isOpen = true},
            ['twoGatewayHyvaGetCompanyDisplayName']() {return this.item.companyDisplayName},
            ['twoGatewayHyvaGetCompanyId']() {return this.item.companyId},
            ['twoGatewayHyvaOnArrowDown'](event) {return this.nextItem()},
            ['twoGatewayHyvaOnArrowUp'](event) {return this.prevItem()},
            ['twoGatewayHyvaOnEnterSelect'](event) {return this.selectHighlightedItem()},
            ['twoGatewayHyvaOnItemMouseover'](event) {return this.selectedIndex = this.index},
            ['twoGatewayHyvaShouldShowMinCharsMessage']() {return this.search.length < 3},
        }
    )
}
window.addEventListener('alpine:init', () => Alpine.data('twoGatewayHyvaCompanySearchField', twoGatewayHyvaCompanySearchField), {once: true});
</script>
<?php $hyvaCsp->registerInlineScript(); ?>
