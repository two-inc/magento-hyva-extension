<?php
/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes 2020-present. All rights reserved.
 * This product is licensed per Magento install
 * See https://hyva.io/license
 */

declare(strict_types=1);

use Hyva\Theme\ViewModel\HyvaCsp;

/** @var HyvaCsp $hyvaCsp */

/** Generated with hyva-csp-helper.php */
?>
<script>
function abnGatewayHyvaCompanySearchField() {
    return Object.assign(
        searchInput(),
        {
            showManual: false,
            ['!showManual']() {return !this.showManual},
            ['abnGatewayHyvaOnCompanySearchChange'](event) {return this.search = this.$el.value},
            ['abnGatewayHyvaGetItemClass']() {return {'bg-gray-100': this.selectedIndex === this.index}},
            ['abnGatewayHyvaOnSearchModeClick'](event) {return this.showManual = false},
            ['abnGatewayHyvaOnCompanyItemClick'](event) {event.stopPropagation(); return this.selectItem(this.items[this.selectedIndex])},
            ['abnGatewayHyvaOnManualEntryClick'](event) {this.showManual = true; hyva.getBrowserStorage().setItem('shipping_company_selection', JSON.stringify({}));},
            ['abnGatewayHyvaOnCompanySearchClickOutside'](event) {return this.isOpen = false},
            ['abnGatewayHyvaOnCompanySearchFocus'](event) {return this.isOpen = true},
            ['abnGatewayHyvaGetCompanyDisplayName']() {return this.item.companyDisplayName},
            ['abnGatewayHyvaGetCompanyId']() {return this.item.companyId},
            ['abnGatewayHyvaOnArrowDown'](event) {return this.nextItem()},
            ['abnGatewayHyvaOnArrowUp'](event) {return this.prevItem()},
            ['abnGatewayHyvaOnEnterSelect'](event) {return this.selectHighlightedItem()},
            ['abnGatewayHyvaOnItemMouseover'](event) {return this.selectedIndex = this.index},
            ['abnGatewayHyvaShouldShowMinCharsMessage']() {return this.search.length < 3},
        }
    )
}
window.addEventListener('alpine:init', () => Alpine.data('abnGatewayHyvaCompanySearchField', abnGatewayHyvaCompanySearchField), {once: true});
</script>
<?php $hyvaCsp->registerInlineScript(); ?>
